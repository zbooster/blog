---
layout: post
title: "사내 WireGuard VPN 구축하기"
subtitle: ""
date: 2023-01-28 15:00:00 +0900
---
![WireGaurd](https://user-images.githubusercontent.com/100823210/215249301-1d4beb30-16ea-448d-814c-b66a6296f030.png){: width="100%" height="100%"}
꼭 한달만에 다시쓰는 글이다. 최근 프로젝트에 나가있어 VPN으로 사내에 접속할 일이 많았는데 기존에 구축해놓았던 Softether VPN의 속도가 느려서 그 대안으로 찾아본 것이 WireGuard 이다.


# 왜 WireGuard를 선택했는가?
## Softether VPN서버의 불만
Softether를 구축하면서 편리했던 점은 설치가 쉽고 GUI로 관리가 가능했기 때문이고 딱히 클라이언트를 설치하지 않아도 연결을 할 수 있기 때문이였다. 그 때 WireGaurd도 선택지에 있었으나 선택하지 않은 이유는 클라이언트 설치가 필요했고 접속을 위해 Key를 배포해야 했었기 때문이다. (윗 분들은 그런거 싫어한다.)

그러나, 요즘 vSphere내 테스트 머신에 접속하여 작업하는데 설치 스크립트 수행 중간에 접속이 끊겨 먹통이 되는 현상이 나타났다. 처음에는 별 생각이 없었지만, 현재하는 업무 특성상 계속 설치작업이 일어나기 때문에 슬슬 짜증이 났다.

접속이 끊기는 패턴을 확인해보면, 설치 스크립트 같이 다른 실행파일을 fork해서 수행하고 결과를 얻는 과정에서 끊어졌다. Windows에 내장된 IPSec방식이 아닌 Client설치를 하고 VPN을 연결해서 수행하면 좀 더 나은모습을 보였지만 그래도 끊기기는 마찬가지였다.

## WireGuard Easy의 발견
사실 이 프로젝트의 발견이 결정적이였다. 이전에 테스트할때는 Linux에 명령을 수행해서 키를 만들고 설정파일을 만들어 배포하는 방식이 너무 번거롭다고 느껴졌는데 Docker 이미지만 실행하면 설치가 끝나고 신규 사용자를 등록하는 과정은 GUI로 실행하면 된다.


# 레퍼런스
- [WireGaurd 홈페이지](https://www.wireguard.com/)
